Version 4.1
SHEET 1 1436 1132
WIRE -48 -208 -48 -240
WIRE -48 -144 -48 -208
WIRE 688 -144 640 -144
WIRE 784 -144 752 -144
WIRE 128 -112 128 -192
WIRE 640 -48 640 -144
WIRE 672 -48 640 -48
WIRE 784 -48 784 -144
WIRE 784 -48 752 -48
WIRE 784 16 784 -48
WIRE 128 64 128 -32
WIRE 128 64 -64 64
WIRE 320 64 128 64
WIRE 528 64 320 64
WIRE 640 64 640 -48
WIRE 640 64 608 64
WIRE 704 80 704 48
WIRE -64 96 -64 64
WIRE 128 96 128 64
WIRE 640 96 640 64
WIRE 672 96 640 96
WIRE 784 112 736 112
WIRE 848 112 784 112
WIRE 880 112 848 112
WIRE 672 128 640 128
WIRE 640 192 640 128
WIRE 640 192 608 192
WIRE 704 192 704 144
WIRE 128 272 128 176
WIRE 256 272 128 272
WIRE 528 272 528 192
WIRE 528 272 352 272
WIRE 640 288 640 192
WIRE 656 288 640 288
WIRE 784 288 784 112
WIRE 784 288 736 288
WIRE 128 304 128 272
WIRE 48 320 16 320
WIRE 80 320 48 320
WIRE 272 352 272 320
WIRE 272 368 272 352
WIRE 640 384 640 288
WIRE 672 384 640 384
WIRE 784 384 784 288
WIRE 784 384 736 384
WIRE -64 448 -64 176
WIRE 128 448 128 400
WIRE 128 448 -64 448
WIRE 192 448 128 448
WIRE 256 448 192 448
WIRE 528 448 528 272
WIRE 528 448 352 448
WIRE 336 528 336 496
WIRE 192 544 192 448
WIRE 336 544 336 528
WIRE -192 656 -192 624
WIRE 256 656 256 624
WIRE 16 672 16 640
WIRE 256 672 256 656
WIRE 192 688 176 688
WIRE 224 688 192 688
WIRE 400 704 288 704
WIRE 432 704 400 704
WIRE 800 704 800 688
WIRE 224 720 176 720
WIRE 800 720 800 704
WIRE 752 736 688 736
WIRE -192 768 -192 736
WIRE 16 784 16 752
WIRE -192 800 -192 768
WIRE -192 800 -288 800
WIRE 432 800 432 704
WIRE 512 800 432 800
WIRE 688 800 688 736
WIRE 688 800 608 800
WIRE -288 816 -288 800
WIRE 16 816 16 784
WIRE 16 816 -80 816
WIRE 176 816 176 720
WIRE -80 832 -80 816
WIRE 512 848 432 848
WIRE 688 848 624 848
WIRE 256 864 256 832
WIRE 800 864 800 848
WIRE 256 880 256 864
WIRE 800 880 800 864
WIRE 176 896 176 816
WIRE 224 896 176 896
WIRE 688 896 688 848
WIRE 752 896 688 896
WIRE 384 912 288 912
WIRE 432 912 432 848
WIRE 432 912 384 912
WIRE -288 928 -288 880
WIRE -192 928 -192 880
WIRE -192 928 -288 928
WIRE 192 928 176 928
WIRE 224 928 192 928
WIRE -192 944 -192 928
WIRE -80 944 -80 896
WIRE 16 944 16 896
WIRE 16 944 -80 944
WIRE 16 960 16 944
FLAG 704 192 vdd
FLAG 128 -192 vdd
FLAG 192 544 0
FLAG 704 48 0
FLAG 784 16 0
FLAG 848 112 vout
FLAG -48 -64 0
FLAG -48 -208 vdd
FLAG 48 320 vmos
FLAG 272 352 vmos
FLAG 336 528 vmosn
FLAG 16 960 0
FLAG 16 640 vdd
FLAG -192 944 0
FLAG -192 624 vdd
FLAG 16 784 vmax
FLAG -192 768 vmin
FLAG 176 816 vout
FLAG 192 688 vmax
FLAG 192 928 vmin
FLAG 256 656 vdd
FLAG 256 864 vdd
FLAG 400 704 vmaxc
FLAG 384 912 vminc
FLAG 256 944 0
FLAG 256 736 0
FLAG 320 64 vshunt
FLAG 752 784 0
FLAG 800 800 0
FLAG 752 944 0
FLAG 800 960 0
FLAG 800 864 vmosn
FLAG 800 704 vmos
SYMBOL res 624 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rin}
SYMBOL res 624 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rin}
SYMBOL res 768 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rf}
SYMBOL res 752 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {Rf}
SYMBOL res 112 80 R0
SYMATTR InstName R5
SYMATTR Value {Rshunt}
SYMBOL cap 736 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL cap 752 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {C}
SYMBOL OpAmps\\AD8628 704 176 M180
SYMATTR InstName U1
SYMBOL voltage -48 -160 R0
SYMATTR InstName Vdd1
SYMATTR Value 3.3
SYMBOL nmos 80 400 M180
WINDOW 3 56 60 Invisible 2
SYMATTR Value ISCH42N04LM7_L0
SYMATTR InstName M1
SYMATTR Prefix x
SYMBOL res -80 80 R0
SYMATTR InstName R6
SYMATTR Value {Rshunt2}
SYMBOL current 128 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(1u 1.5m 10u 5 5)
SYMBOL nmos 352 320 M270
WINDOW 3 56 72 Invisible 2
SYMATTR Value ISCH42N04LM7_L0
SYMATTR InstName M2
SYMATTR Prefix x
SYMBOL nmos 256 496 R270
WINDOW 3 56 72 Invisible 2
SYMATTR Value ISCH42N04LM7_L0
SYMATTR InstName M3
SYMATTR Prefix x
SYMBOL res 0 656 R0
SYMATTR InstName R9
SYMATTR Value 39.3k
SYMBOL res 0 800 R0
SYMATTR InstName R10
SYMATTR Value 470
SYMBOL cap -96 832 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res -208 640 R0
SYMATTR InstName R11
SYMATTR Value 500k
SYMBOL res -208 784 R0
SYMATTR InstName R12
SYMATTR Value 5
SYMBOL cap -304 816 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL Comparators\\LT1017 256 704 R0
SYMATTR InstName U2
SYMATTR Value LMV761
SYMBOL Comparators\\LT1017 256 912 R0
SYMATTR InstName U3
SYMATTR Value LMV761
SYMBOL Digital\\srflop 560 752 R0
SYMATTR InstName A1
SYMBOL e 800 704 R0
SYMATTR InstName E1
SYMATTR Value 3.3
SYMBOL e 800 864 R0
SYMATTR InstName E2
SYMATTR Value 3.3
TEXT -264 -208 Left 2 ;.dc I1 1u 1
TEXT -264 -184 Left 2 !.tran 10
TEXT 640 -240 Left 5 ;Low side
TEXT -560 -48 Left 2 !.include OptiMOS7_40V_LTSpice.lib
TEXT -432 24 Left 2 !.param C = 47n\n.param Iload = 1\n.param scale = 10\n.param Rin = 1k*scale\n.param Rf 3.6k*scale\n.param tol = 0.001\n.param tolcap = 0.05\n.param Rshunt = 10m\n.param Rshunt2 = 10
TEXT -560 -96 Left 2 !.include LMV761.lib
